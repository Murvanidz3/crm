# ­Ъћё Re-deploy рЃўрЃюрЃАрЃбрЃарЃБрЃЦрЃфрЃўрЃљ - Subdomain Structure-рЃўрЃАрЃЌрЃЋрЃўрЃА

## РЮЊ рЃАрЃљрЃГрЃўрЃарЃЮрЃљ рЃЌрЃБ рЃљрЃарЃљ рЃДрЃЋрЃћрЃџрЃљрЃцрЃарЃўрЃА рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃњрЃљрЃЎрЃћрЃЌрЃћрЃЉрЃљ?

**рЃљрЃарЃљ!** GitHub Actions workflow рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃњрЃљрЃЊрЃљрЃўрЃбрЃљрЃюрЃА рЃцрЃљрЃўрЃџрЃћрЃЉрЃА рЃАрЃгрЃЮрЃа рЃљрЃЊрЃњрЃўрЃџрЃљрЃА.

## ­ЪЊІ рЃарЃљ рЃБрЃюрЃЊрЃљ рЃњрЃљрЃЎрЃћрЃЌрЃЊрЃћрЃА:

### 1. GitHub Actions Workflow-рЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ

**рЃЋрЃљрЃарЃўрЃљрЃюрЃбрЃў A: рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ**
- Workflow рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃњрЃљрЃћрЃерЃЋрЃћрЃЉрЃљ, рЃарЃљрЃЊрЃњрЃљрЃю рЃЕрЃЋрЃћрЃю рЃњрЃљрЃЋрЃљрЃЎрЃћрЃЌрЃћрЃЌ push
- рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ: https://github.com/Murvanidz3/crm/actions
- рЃЊрЃљрЃћрЃџрЃЮрЃЊрЃћрЃЌ workflow-рЃўрЃА рЃЊрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃљрЃА (1-2 рЃгрЃБрЃЌрЃў)

**рЃЋрЃљрЃарЃўрЃљрЃюрЃбрЃў B: рЃ«рЃћрЃџрЃўрЃЌ**
1. рЃњрЃљрЃЊрЃљрЃЊрЃўрЃЌ: https://github.com/Murvanidz3/crm/actions
2. рЃљрЃўрЃарЃЕрЃўрЃћрЃЌ "Deploy CRM to Hostinger"
3. рЃЊрЃљрЃљрЃГрЃўрЃарЃћрЃЌ "Run workflow"
4. рЃљрЃўрЃарЃЕрЃўрЃћрЃЌ "main" рЃЉрЃарЃћрЃюрЃЕрЃў
5. рЃЊрЃљрЃљрЃГрЃўрЃарЃћрЃЌ "Run workflow"

### 2. SSH-рЃерЃў рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ (workflow-рЃўрЃА рЃЊрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ)

```bash
cd ~/domains/onecar.ge/public_html/portal
ls -la
```

**рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА:**
- РюЁ `index.php` (root-рЃерЃў)
- РюЁ `.htaccess` (root-рЃерЃў)
- РюЁ `app/` рЃцрЃЮрЃџрЃЊрЃћрЃарЃў
- РюЁ `bootstrap/` рЃцрЃЮрЃџрЃЊрЃћрЃарЃў
- РюЁ `config/` рЃцрЃЮрЃџрЃЊрЃћрЃарЃў
- РюЁ `vendor/` рЃцрЃЮрЃџрЃЊрЃћрЃарЃў (рЃЌрЃБ composer install рЃњрЃљрЃерЃЋрЃћрЃЉрЃБрЃџрЃўрЃљ)
- РюЁ `storage/` рЃцрЃЮрЃџрЃЊрЃћрЃарЃў
- РюЁ `routes/` рЃцрЃЮрЃџрЃЊрЃћрЃарЃў

### 3. Composer Install (рЃЌрЃБ vendor рЃљрЃа рЃљрЃарЃўрЃА)

```bash
cd ~/domains/onecar.ge/public_html/portal
composer install --no-dev --optimize-autoloader
```

### 4. .env рЃцрЃљрЃўрЃџрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ (рЃЌрЃБ рЃљрЃа рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА)

```bash
cd ~/domains/onecar.ge/public_html/portal
nano .env
```

рЃЕрЃљрЃАрЃЋрЃўрЃЌ:
```env
APP_NAME=CRM
APP_ENV=production
APP_KEY=
APP_DEBUG=false
APP_URL=https://portal.onecar.ge

DB_CONNECTION=mysql
DB_HOST=localhost
DB_PORT=3306
DB_DATABASE=crm_db
DB_USERNAME=crm_db
DB_PASSWORD=Tormeti21!
```

**­ЪњЙ рЃерЃћрЃўрЃюрЃљрЃ«рЃћрЃЌ:** `Ctrl+X`, `Y`, `Enter`

### 5. APP_KEY-рЃўрЃА рЃњрЃћрЃюрЃћрЃарЃљрЃфрЃўрЃљ

```bash
cd ~/domains/onecar.ge/public_html/portal
php artisan key:generate
```

### 6. Permissions-рЃћрЃЉрЃўрЃА рЃЊрЃљрЃДрЃћрЃюрЃћрЃЉрЃљ

```bash
cd ~/domains/onecar.ge/public_html/portal
chmod -R 755 storage
chmod -R 755 bootstrap/cache
```

### 7. рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ

рЃњрЃљрЃЊрЃљрЃЊрЃўрЃЌ: **https://portal.onecar.ge/login**

рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА login рЃњрЃЋрЃћрЃарЃЊрЃў!

---

## ­ЪД╣ рЃФрЃЋрЃћрЃџрЃў рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃА рЃгрЃљрЃерЃџрЃљ (рЃЌрЃБ рЃАрЃљрЃГрЃўрЃарЃЮрЃљ)

рЃЌрЃБ рЃФрЃЋрЃћрЃџрЃў рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ рЃЊрЃљрЃарЃЕрЃљ (рЃЏрЃљрЃњ. `portal/public/` рЃцрЃЮрЃџрЃЊрЃћрЃарЃў), рЃерЃћрЃњрЃўрЃФрЃџрЃўрЃљрЃЌ рЃгрЃљрЃерЃљрЃџрЃЮрЃЌ:

```bash
cd ~/domains/onecar.ge/public_html/portal
# рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ, рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ public рЃцрЃЮрЃџрЃЊрЃћрЃарЃў
ls -la public/ 2>/dev/null

# рЃЌрЃБ рЃљрЃарЃўрЃА рЃЊрЃљ рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃАрЃгрЃЮрЃарЃљрЃЊ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА, рЃерЃћрЃњрЃўрЃФрЃџрЃўрЃљрЃЌ рЃгрЃљрЃерЃљрЃџрЃЮрЃЌ:
# rm -rf public/
```

**Рџа№ИЈ рЃДрЃБрЃарЃљрЃЊрЃдрЃћрЃЉрЃљ:** рЃгрЃљрЃерЃљрЃџрЃћрЃЌ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЏрЃљрЃерЃўрЃю, рЃарЃЮрЃфрЃљ рЃЊрЃљрЃарЃгрЃЏрЃБрЃюрЃћрЃЉрЃБрЃџрЃў рЃ«рЃљрЃарЃЌ, рЃарЃЮрЃЏ рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃАрЃгрЃЮрЃарЃљрЃЊ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА!

---

## РюЁ рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ

- [ ] GitHub Actions workflow рЃЊрЃљрЃАрЃарЃБрЃџрЃЊрЃљ рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌ
- [ ] `index.php` рЃљрЃарЃўрЃА `portal/` root-рЃерЃў
- [ ] `.htaccess` рЃљрЃарЃўрЃА `portal/` root-рЃерЃў
- [ ] `vendor/` рЃцрЃЮрЃџрЃЊрЃћрЃарЃў рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА (composer install рЃњрЃљрЃерЃЋрЃћрЃЉрЃБрЃџрЃўрЃљ)
- [ ] `.env` рЃцрЃљрЃўрЃџрЃў рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА рЃЊрЃљ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃўрЃљ
- [ ] `APP_KEY` рЃњрЃћрЃюрЃћрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃўрЃљ
- [ ] `storage` рЃЊрЃљ `bootstrap/cache` permissions: 755
- [ ] https://portal.onecar.ge/login рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА

---

## ­Ъєў рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃћрЃЉрЃў?

### "404 Not Found"
- рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ, рЃарЃЮрЃЏ `index.php` рЃљрЃарЃўрЃА `portal/` root-рЃерЃў
- рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ `.htaccess` рЃцрЃљрЃўрЃџрЃў

### "500 Internal Server Error"
- рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ `.env` рЃцрЃљрЃўрЃџрЃў
- рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ `APP_KEY` рЃњрЃћрЃюрЃћрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃўрЃљ рЃЌрЃБ рЃљрЃарЃљ
- рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ `storage` рЃЊрЃљ `bootstrap/cache` permissions

### "Class not found"
- рЃњрЃљрЃБрЃерЃЋрЃўрЃЌ `composer install`
- рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЌ, рЃарЃЮрЃЏ `vendor/` рЃцрЃЮрЃџрЃЊрЃћрЃарЃў рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА

